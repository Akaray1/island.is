{
  "openapi": "3.0.0",
  "paths": {
    "/liveness": {
      "get": {
        "operationId": "InfraController_liveness",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Liveness"
                }
              }
            }
          }
        },
        "tags": ["internal"]
      }
    },
    "/version": {
      "get": {
        "operationId": "InfraController_version",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Version"
                }
              }
            }
          }
        },
        "tags": ["internal"]
      }
    },
    "/active-programs": {
      "get": {
        "operationId": "ExampleController_getActivePrograms",
        "summary": "Get all active programs",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Returns all active programs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExampleProgramResponse"
                }
              }
            }
          }
        },
        "tags": ["Example endpoints for universities"]
      }
    },
    "/program/{externalId}/courses": {
      "get": {
        "operationId": "ExampleController_getProgramsCourses",
        "summary": "Get courses for an active programs",
        "parameters": [
          {
            "name": "externalId",
            "required": true,
            "in": "path",
            "allowEmptyValue": false,
            "description": "Application ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the program",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProgramCoursesResponse"
                }
              }
            }
          }
        },
        "tags": ["Example endpoints for universities"]
      }
    },
    "/applications/{id}": {
      "get": {
        "operationId": "ExampleController_getApplicationStatus",
        "summary": "Get application data",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "allowEmptyValue": false,
            "description": "Application ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the updated application data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExampleApplicationResponse"
                }
              }
            }
          }
        },
        "tags": ["Example endpoints for universities"]
      },
      "post": {
        "operationId": "ExampleController_updateApplication",
        "summary": "Update application status. Used when student accepts/rejects/cancels.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "allowEmptyValue": false,
            "description": "Application ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateApplicationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "TBD",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "tags": ["Example endpoints for universities"]
      }
    },
    "/applications": {
      "post": {
        "operationId": "ExampleController_createApplication",
        "summary": "Create application in university DB",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApplicationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "TBD",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "tags": ["Example endpoints for universities"]
      }
    },
    "/openapi.yaml": {
      "get": {
        "operationId": "InfraController_openapi",
        "parameters": [],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "text/yaml": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            },
            "headers": {
              "Content-Disposition": {
                "schema": {
                  "type": "string",
                  "description": "Used only with `text/yaml` responses",
                  "example": "attachment; filename=\"openapi.yaml\""
                }
              }
            }
          }
        },
        "tags": ["internal"]
      }
    }
  },
  "info": {
    "title": "University Application",
    "description": "API description",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [
    {
      "url": "https://{environment}.is/api/umsoknirislandis/",
      "variables": {
        "environment": {
          "default": "ugla.hi",
          "enum": [
            "ugla.hi",
            "ugla.unak",
            "ugla.bifrost",
            "ugla.holar",
            "ugla.lbhi",
            "ugla.lhi",
            "aribj.throun.hi"
          ]
        }
      }
    }
  ],
  "components": {
    "securitySchemes": {
      "ias": {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "https://identity-server.dev01.devland.is/connect/authorize",
            "tokenUrl": "https://identity-server.dev01.devland.is/connect/token",
            "scopes": {
              "openid": "",
              "profile": "",
              "@island.is/university-gateway": ""
            }
          }
        },
        "description": "Authentication and authorization using island.is authentication service (IAS)."
      }
    },
    "schemas": {
      "Liveness": {
        "type": "object",
        "properties": {
          "ok": {
            "type": "boolean"
          }
        },
        "required": ["ok"]
      },
      "Version": {
        "type": "object",
        "properties": {
          "version": {
            "type": "string"
          }
        },
        "required": ["version"]
      },
      "ExampleCourse": {
        "type": "object",
        "properties": {
          "externalId": {
            "type": "string",
            "description": "External ID for the course (from University)",
            "example": "ABC12345"
          },
          "nameIs": {
            "type": "string",
            "description": "Course name (Icelandic)",
            "example": "Tölvunarfræði I"
          },
          "nameEn": {
            "type": "string",
            "description": "Course name (English)",
            "example": "Computer science I"
          },
          "required": {
            "type": "string",
            "description": "Whether the course is required to take within the program",
            "example": "M"
          },
          "credits": {
            "type": "number",
            "description": "Number of course credits (in ECTS)",
            "example": 8
          },
          "semesterYear": {
            "type": "number",
            "description": "Which year this course is taught on",
            "example": 2023
          },
          "semesterSeason": {
            "type": "string",
            "description": "Which season this course is taught on",
            "example": "FALL",
            "enum": ["FALL", "SPRING", "SUMMER"]
          },
          "descriptionIs": {
            "type": "string",
            "description": "Course description (Icelandic)",
            "example": "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
          },
          "descriptionEn": {
            "type": "string",
            "description": "Course description (English)",
            "example": "Mauris a justo arcu. Orci varius natoque penatibus."
          },
          "externalUrlIs": {
            "type": "string",
            "description": "External url  for the course from the university web page (Icelandic)",
            "example": "https://www.hi.is/grunnnam/tolvunarfraedi/staerdfraedigreining-i"
          },
          "externalUrlEn": {
            "type": "string",
            "description": "External url  for the course from the university web page (English)",
            "example": "https://www.en.hi.is/undergraduate-study/computer-science/mathematical-analysis-i"
          }
        },
        "required": [
          "externalId",
          "nameIs",
          "nameEn",
          "required",
          "credits",
          "semesterYear",
          "semesterSeason"
        ]
      },
      "ExampleProgramExtraApplicationField": {
        "type": "object",
        "properties": {
          "nameIs": {
            "type": "string",
            "description": "Field name (Icelandic)",
            "example": "Ferilskrá"
          },
          "nameEn": {
            "type": "string",
            "description": "Field name (English)",
            "example": "CV"
          },
          "descriptionIs": {
            "type": "string",
            "description": "Field description (Icelandic)",
            "example": "Fusce sit amet pellentesque magna."
          },
          "descriptionEn": {
            "type": "string",
            "description": "Field description (English)",
            "example": "Phasellus nisi turpis, rutrum vitae congue sed."
          },
          "required": {
            "type": "string",
            "description": "Is this field required?",
            "example": true
          },
          "fieldType": {
            "type": "string",
            "description": "What type of field should be displayed in the application form",
            "example": "UPLOAD",
            "enum": ["UPLOAD", "CHECKBOX", "TEXT_INPUT", "TEXT_AREA"]
          },
          "uploadAcceptedFileType": {
            "type": "string",
            "description": "If field type is UPLOAD, then this field is required and should list up all file types that should be accepted",
            "example": ".pdf, .jpg, .jpeg, .png"
          }
        },
        "required": ["nameIs", "required", "fieldType"]
      },
      "ExampleProgram": {
        "type": "object",
        "properties": {
          "externalId": {
            "type": "string",
            "description": "External ID for the program (from University)",
            "example": "ABC12345"
          },
          "nameIs": {
            "type": "string",
            "description": "Program name (Icelandic)",
            "example": "Tölvunarfræði"
          },
          "nameEn": {
            "type": "string",
            "description": "Program name (English)",
            "example": "Computer science"
          },
          "departmentNameIs": {
            "type": "string",
            "description": "Name of the department that the program belongs to (Icelandic)",
            "example": "Verkfræði og náttúruvísindasvið"
          },
          "departmentNameEn": {
            "type": "string",
            "description": "Name of the department that the program belongs to (English)",
            "example": "Engineering and Natural Sciences"
          },
          "startingSemesterYear": {
            "type": "number",
            "description": "Which year this program started on",
            "example": 2023
          },
          "startingSemesterSeason": {
            "type": "string",
            "description": "Which season this program started on",
            "example": "FALL",
            "enum": ["FALL", "SPRING", "SUMMER"]
          },
          "applicationStartDate": {
            "format": "date-time",
            "type": "string",
            "description": "When the application period for this program starts",
            "example": "2023-05-01T00:00:00.000Z"
          },
          "applicationEndDate": {
            "format": "date-time",
            "type": "string",
            "description": "When the application period for this program ends",
            "example": "2023-08-01T00:00:00.000Z"
          },
          "degreeType": {
            "type": "string",
            "description": "Degree type",
            "example": "UNDERGRADUATE",
            "enum": ["UNDERGRADUATE", "POSTGRADUATE", "DOCTORAL"]
          },
          "degreeAbbreviation": {
            "type": "string",
            "description": "Degree abbreviation",
            "example": "BSc"
          },
          "credits": {
            "type": "number",
            "description": "Number of course credits (in ECTS)",
            "example": "180"
          },
          "descriptionIs": {
            "type": "string",
            "description": "Program description (Icelandic)",
            "example": "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
          },
          "descriptionEn": {
            "type": "string",
            "description": "Program description (English)",
            "example": "Mauris a justo arcu. Orci varius natoque penatibus."
          },
          "durationInYears": {
            "type": "number",
            "description": "Total duration for this program (in years)",
            "example": 3
          },
          "costPerYear": {
            "type": "number",
            "description": "Cost for program (per year)",
            "example": 75000
          },
          "iscedCode": {
            "type": "string",
            "description": "ISCED code for program",
            "example": "481"
          },
          "externalUrlIs": {
            "type": "string",
            "description": "External url  for the program from the university web page (Icelandic)",
            "example": "https://www.ru.is/grunnnam/tolvunarfraedi"
          },
          "externalUrlEn": {
            "type": "string",
            "description": "External url  for the program from the university web page (English)",
            "example": "https://en.ru.is/st/dcs/undergraduate-study/bsc-computer-science"
          },
          "modeOfDelivery": {
            "type": "array",
            "description": "Modes of deliveries available for the program",
            "example": ["ON_SITE"],
            "items": {
              "type": "string",
              "enum": ["ON_SITE", "ONLINE", "ONLINE_WITH_SESSION", "MIXED"]
            }
          },
          "interestTags": {
            "type": "array",
            "description": "Interest tag for the program (to be able to categorize programs after interest)",
            "example": ["ENGINEER"],
            "items": {
              "type": "string",
              "enum": ["POLITICS", "LANGUAGE", "ENGINEER", "HISTORY"]
            }
          },
          "admissionRequirementsIs": {
            "type": "string",
            "description": "Admission requirements for program (Icelandic)",
            "example": "Nemandinn verður að hafa klárað stúdentspróf"
          },
          "admissionRequirementsEn": {
            "type": "string",
            "description": "Admission requirements for program (English)",
            "example": "The student needs to have finished the matriculation exam"
          },
          "studyRequirementsIs": {
            "type": "string",
            "description": "Study requirements for program (Icelandic)",
            "example": "Nemandinn verður að vera með lágmarkseinkunn 6 í öllum áföngum"
          },
          "studyRequirementsEn": {
            "type": "string",
            "description": "Study requirements for program (English)",
            "example": "The student must have a minimum grade of 6 in all courses"
          },
          "costInformationIs": {
            "type": "string",
            "description": "Cost information for program (Icelandic)",
            "example": "Það verður að borga 10.000 kr staðfestingargjald fyrir 1. ágúst"
          },
          "costInformationEn": {
            "type": "string",
            "description": "Cost information for program (English)",
            "example": "A confirmation fee of ISK 10.000 must be paid before August 1"
          },
          "extraApplicationFields": {
            "description": "Other fields that should be displayed in the application for the program",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExampleProgramExtraApplicationField"
            }
          }
        },
        "required": [
          "externalId",
          "nameIs",
          "nameEn",
          "departmentNameIs",
          "departmentNameEn",
          "startingSemesterYear",
          "startingSemesterSeason",
          "applicationStartDate",
          "degreeType",
          "degreeAbbreviation",
          "modeOfDelivery",
          "interestTags",
          "extraApplicationFields"
        ]
      },
      "ExampleProgramResponse": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Program data",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExampleProgram"
            }
          }
        },
        "required": ["data"]
      },
      "ExampleApplication": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Application status",
            "example": "IN_REVIEW",
            "enum": [
              "IN_REVIEW",
              "IN_PROGRESS",
              "ACCEPTED_BY_UNIVERSITY",
              "ACCEPTED_BY_UNIVERSITY_WITH_CONDITION",
              "ACCEPTED_BY_UNIVERSITY_AND_STUDENT",
              "REJECTED_BY_STUDENT_REASON_CANCELLED",
              "REJECTED_BY_STUDENT_REASON_OTHER_ACCEPTED",
              "REJECTED_BY_UNIVERSITY_REASON_INSUFFICIENT",
              "REJECTED_BY_UNIVERSITY_REASON_NO_AVAILABILITY",
              "CANCELLED_BY_STUDENT"
            ]
          }
        },
        "required": ["status"]
      },
      "ExampleApplicationResponse": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Application status data",
            "allOf": [
              {
                "$ref": "#/components/schemas/ExampleApplication"
              }
            ]
          }
        },
        "required": ["data"]
      },
      "ProgramCoursesResponse": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Column description for data",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExampleCourse"
            }
          }
        }
      },
      "CreateApplicationDto": {
        "type": "object",
        "properties": {
          "universityId": {
            "type": "string",
            "description": "University ID",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "programId": {
            "type": "string",
            "description": "Program ID",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "modeOfDelivery": {
            "type": "string",
            "description": "What mode of delivery was selected in the application",
            "example": "ON_SITE",
            "enum": ["ON_SITE", "ONLINE", "ONLINE_WITH_SESSION"]
          },
          "extraData": {
            "type": "string",
            "description": "Extra data that should follow application",
            "example": "TBD"
          }
        },
        "required": ["universityId", "programId", "modeOfDelivery"]
      },
      "UpdateApplicationDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Application status",
            "example": "ACCEPTED_BY_UNIVERSITY_AND_STUDENT",
            "enum": [
              "IN_REVIEW",
              "IN_PROGRESS",
              "ACCEPTED_BY_UNIVERSITY",
              "ACCEPTED_BY_UNIVERSITY_AND_STUDENT",
              "REJECTED_BY_STUDENT_REASON_CANCELLED",
              "REJECTED_BY_STUDENT_REASON_OTHER_ACCEPTED",
              "REJECTED_BY_UNIVERSITY_REASON_INSUFFICIENT",
              "REJECTED_BY_UNIVERSITY_REASON_NO_AVAILABILITY",
              "CANCELLED_BY_STUDENT"
            ]
          }
        },
        "required": ["status"]
      }
    }
  }
}
