{
  "openapi": "3.0.1",
  "info": { "title": "Open Job Positions, vacancies", "version": "2.0.0" },
  "servers": [
    {
      "url": "/ords/oebs/api/umsokn/v2",
      "description": "Development server 1"
    },
    {
      "url": "/ords/oebs/api/umsokn/v2",
      "description": "Development server 2"
    },
    { "url": "/ords/oebs/api/umsokn/v2", "description": "Test server" },
    { "url": "/ords/oebs/api/umsokn/v2", "description": "Production server" }
  ],
  "paths": {
    "/locations": {
      "get": {
        "description": "Job locations",
        "responses": {
          "200": {
            "description": "The queried records.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            }
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/jobtypes": {
      "get": {
        "description": "Job types",
        "responses": {
          "200": {
            "description": "The queried records.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            }
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/stofnanir": {
      "get": {
        "description": "Organizations",
        "responses": {
          "200": {
            "description": "The queried records.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            }
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/vacancies": {
      "get": {
        "description": "Return open vacancies from the icelandic state recruitment system",
        "parameters": [
          {
            "name": "language",
            "in": "query",
            "description": "Return vacancies in selected language. Vacancies that have not been translated are returned in icelandic unless ONLYEN is used, then only vacancies that have been translated to english are returned.",
            "schema": {
              "type": "string",
              "enum": ["IS", "EN", "ONLYEN", "ONLYIS"],
              "default": "IS"
            }
          },
          {
            "name": "stofnun",
            "in": "query",
            "description": "Institution abbrevation, fetch only vacancies for that institution",
            "schema": { "type": "string", "maxLength": 10, "pattern": "\\p{L}" }
          },
          {
            "name": "query",
            "in": "query",
            "description": "Query parameter filters by fyrirsogn, inngangur and stofnunHeiti",
            "schema": { "type": "string" }
          },
          {
            "name": "location",
            "description": "filter by location (stadsetning), comma delimited id list. Valid ids are found by the /locations endpoint",
            "in": "query",
            "required": false,
            "schema": { "type": "string" },
            "example": "100,900"
          },
          {
            "name": "jobtype",
            "description": "filter by jobtype. Comma delimited id list. Valid ids are found by the /jobtypes endpoint",
            "in": "query",
            "required": false,
            "schema": { "type": "string" },
            "example": "101,102"
          },
          {
            "name": "fetch_offset",
            "description": "Fetch offset",
            "in": "query",
            "required": false,
            "schema": { "type": "number" },
            "example": 0
          },
          {
            "name": "fetch_size",
            "description": "Fetch size",
            "in": "query",
            "required": false,
            "schema": { "type": "number" },
            "example": 25
          },
          {
            "name": "Accept",
            "in": "header",
            "schema": {
              "type": "string",
              "enum": ["application/xml", "application/json"],
              "default": "application/xml"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The queried records.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/openvacaniesv2" }
              },
              "application/xml": { "schema": { "type": "object" } }
            }
          },
          "401": { "$ref": "#/components/responses/UnauthorizedError" }
        }
      }
    },
    "/vacancies/{vacancy_id}": {
      "get": {
        "description": "Retrieve a record from /api/umsokn/v1/",
        "parameters": [
          {
            "name": "vacancy_id",
            "in": "path",
            "description": "the vacancy id to retrieve",
            "required": true,
            "schema": { "type": "integer" }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Return vacancies in selected language. Vacancies that have not been translated are returned in icelandic unless ONLYEN is used, then only vacancies that have been translated to english are returned.",
            "schema": {
              "type": "string",
              "enum": ["IS", "EN", "ONLYEN", "ONLYIS"],
              "default": "IS"
            }
          },
          {
            "name": "Accept",
            "in": "header",
            "schema": {
              "type": "string",
              "enum": ["application/xml", "application/json"],
              "default": "application/xml"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The queried record.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/openvacaniesv2" }
              },
              "application/xml": { "schema": { "type": "object" } }
            }
          },
          "401": { "$ref": "#/components/responses/UnauthorizedError" }
        }
      }
    }
  },
  "components": {
    "responses": {
      "UnauthorizedError": {
        "description": "Authentication information is missing or invalid",
        "headers": { "WWW_Authenticate": { "schema": { "type": "string" } } }
      }
    },
    "securitySchemes": { "basicAuth": { "type": "http", "scheme": "basic" } },
    "schemas": {
      "collectionquery": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "lookup_code": { "type": "string" },
                "meaning": { "type": "string" }
              },
              "required": ["lookup_code", "meaning"]
            }
          },
          "hasMore": { "type": "boolean" },
          "limit": { "type": "number" },
          "offset": { "type": "number" },
          "count": { "type": "number" },
          "links": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "rel": { "type": "string" },
                "href": { "type": "string" }
              },
              "required": ["rel", "href"]
            }
          }
        },
        "required": ["items", "hasMore", "limit", "offset", "count", "links"]
      },
      "openvacaniesv2": {
        "type": "object",
        "properties": {
          "attributes": {
            "type": "object",
            "properties": {
              "serviceName": {
                "type": "string",
                "description": "The name of the web service"
              },
              "rowOffset": {
                "type": "integer",
                "description": "The zero based row offset"
              },
              "fetchSize": {
                "type": "integer",
                "description": "Applied fetch size"
              },
              "numberOfRows": {
                "type": "integer",
                "description": "The number of rows returned"
              },
              "totalRows": {
                "type": "integer",
                "description": "The total number of rows available, can be omitted if calculating total rows is too expensive"
              }
            },
            "required": [
              "serviceName",
              "rowOffset",
              "fetchSize",
              "numberOfRows"
            ],
            "additionalProperties": false
          },
          "starfsauglysing": {
            "type": "object",
            "properties": {
              "id": { "type": "integer" },
              "fyrirsogn": {
                "type": "string",
                "description": "Heiti starfsauglýsingar"
              },
              "umsoknarfrestur_fra": {
                "type": "string",
                "format": "dd.mm.yyyy",
                "description": "umsóknarfrestur frá og með"
              },
              "umsoknarfrestur_til": {
                "type": "string",
                "description": "umsóknarfrestur til og með"
              },
              "inngangur": {
                "type": "string",
                "description": "Lýsing - inngangur"
              },
              "verkefni": {
                "type": "string",
                "description": "Helstu verkefni og ábyrgð"
              },
              "haefnikrofur": {
                "type": "string",
                "description": "Hæfniskröfur"
              },
              "stofnunHeiti": {
                "type": "string",
                "description": "Heiti stofnunar"
              },
              "stofnunNr": {
                "type": "string",
                "description": "Númer stofnunar, fimm stafa númer með 0 padding. Ath þegar númer er ekki með 0 í fremsta staf þá skilar þjónustan þessu sem number ekki string"
              },
              "skipulagseining": {
                "type": "string",
                "description": "Skipulagseining innan stofnunar"
              },
              "heimilisfang": {
                "type": "string",
                "description": "Heimilisfang deildar/stofnunar"
              },
              "postfang": {
                "type": "string",
                "description": "Póstfang deildar/stofnunar"
              },
              "tengilidir": {
                "type": "object",
                "description": "Tengiliðir, nánari upplýsingar veita",
                "properties": {
                  "tengilidur": {
                    "type": "object",
                    "description": "Tengiliður",
                    "properties": {
                      "@nr": {
                        "type": "integer",
                        "description": "Númer tengiliðs, 1 eða 2, fyrir röðun"
                      },
                      "nafn": {
                        "type": "string",
                        "description": "Nafn tengiliðs, nánari upplýsingar veitir"
                      },
                      "netfang": {
                        "type": "string",
                        "description": "Netfang tengiliðs"
                      },
                      "simi": {
                        "type": "integer",
                        "description": "Sími tengiliðs"
                      }
                    },
                    "required": ["@nr", "nafn", "netfang"],
                    "additionalProperties": false
                  }
                },
                "required": ["tengilidur"],
                "additionalProperties": false
              },
              "undirtexti": {
                "type": "string",
                "description": "Frekari upplýsingar um starfið"
              },
              "weblink": {
                "type": "object",
                "description": "Slóð og texti á vefhlekk til að sækja um starfið",
                "properties": {
                  "url": {
                    "type": "string",
                    "format": "url",
                    "description": "Slóð í ráðningarkerfi, smelltu hér til að sækja um"
                  },
                  "text": {
                    "type": "string",
                    "description": "Texti til að setja á vefhlekk."
                  }
                },
                "required": ["url", "text"],
                "additionalProperties": false
              },
              "weblink_extra": {
                "type": "string",
                "description": "Aukahlekkur, ekki notað lengur."
              },
              "vinnutimaskipulag": {
                "type": "string",
                "description": "Vinnutímaskipulag"
              },
              "starfshlutfall": {
                "type": "string",
                "description": "Starfshlutfall, til/frá eða föst prósenta"
              },
              "starfssvid": {
                "type": "string",
                "description": "Starfssvið, starfaflokkun"
              },
              "starfssvid_code": {
                "type": "integer",
                "description": "Starfssvið, starfaflokkun - kóði"
              },
              "birt": {
                "type": "string",
                "description": "Birt á vef, gamalt - ekki notað lengur J/N"
              },
              "launaskilmali": {
                "type": "string",
                "description": "Launaskilmáli, stéttarfélag"
              },
              "stettarfelagHeiti": {
                "type": "string",
                "description": "Heiti stéttarfélags"
              },
              "launaskilmaliFull": {
                "type": "string",
                "description": "Launaskilmáli, samsettur texti til birtingar."
              },
              "logoURL": {
                "type": "string",
                "format": "url",
                "description": "Slóð á táknmynd/logo stofnunar"
              },
              "language": {
                "type": "string",
                "description": "Tungumál auglýsingar"
              },
              "languages": {
                "type": "string",
                "description": "Tungumál sem auglýsing hefur verið þýdd á"
              },
              "other_languages": {
                "type": "string",
                "description": "Önnur tungumál sem auglýsing hefur veruð þýdd á"
              },
              "stadsetningar": {
                "type": "object",
                "description": "Staðsetningar starfs, landssvæði eða án staðsetningar",
                "properties": {
                  "stadsetning": {
                    "type": "object",
                    "description": "Staðsetning",
                    "properties": {
                      "@kodi": {
                        "type": "integer",
                        "description": "Kóði staðsetningar"
                      },
                      "@text": {
                        "type": "string",
                        "description": "Heiti staðsetningar"
                      }
                    },
                    "required": ["@kodi", "@text"],
                    "additionalProperties": false
                  }
                },
                "required": ["stadsetning"],
                "additionalProperties": false
              }
            },
            "required": [
              "id",
              "fyrirsogn",
              "umsoknarfrestur_fra",
              "umsoknarfrestur_til",
              "inngangur",
              "verkefni",
              "haefnikrofur",
              "stofnunHeiti",
              "skipulagseining",
              "heimilisfang",
              "postfang",
              "tengilidir",
              "undirtexti",
              "weblink",
              "weblink_extra",
              "vinnutimaskipulag",
              "starfshlutfall",
              "starfssvid",
              "starfssvid_code",
              "birt",
              "launaskilmali",
              "stettarfelagHeiti",
              "launaskilmaliFull",
              "logoURL",
              "language",
              "languages",
              "other_languages",
              "stadsetningar"
            ],
            "additionalProperties": false
          }
        },
        "additionalProperties": false,
        "required": ["attributes", "starfsauglysing"]
      }
    }
  },
  "security": [{ "basicAuth": [] }]
}
