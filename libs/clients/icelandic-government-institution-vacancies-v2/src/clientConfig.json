{
  "components": {
    "responses": {
      "UnauthorizedError": {
        "description": "Authentication information is missing or invalid",
        "headers": { "WWW_Authenticate": { "schema": { "type": "string" } } }
      }
    },
    "schemas": {
      "collectionquery": {
        "properties": {
          "count": { "type": "number" },
          "hasMore": { "type": "boolean" },
          "items": {
            "items": {
              "properties": {
                "lookup_code": { "type": "string" },
                "meaning": { "type": "string" }
              },
              "required": ["lookup_code", "meaning"],
              "type": "object"
            },
            "type": "array"
          },
          "limit": { "type": "number" },
          "links": {
            "items": {
              "properties": {
                "href": { "type": "string" },
                "rel": { "type": "string" }
              },
              "required": ["rel", "href"],
              "type": "object"
            },
            "type": "array"
          },
          "offset": { "type": "number" }
        },
        "required": ["items", "hasMore", "limit", "offset", "count", "links"],
        "type": "object"
      },
      "openvacaniesv2": {
        "properties": {
          "attributes": {
            "properties": {
              "fetchSize": {
                "description": "Applied fetch size",
                "type": "integer"
              },
              "numberOfRows": {
                "description": "The number of rows returned",
                "type": "integer"
              },
              "rowOffset": {
                "description": "The zero based row offset",
                "type": "integer"
              },
              "serviceName": {
                "description": "The name of the web service",
                "type": "string"
              },
              "totalRows": {
                "description": "The total number of rows available, can be omitted if calculating total rows is too expensive",
                "type": "integer"
              }
            },
            "required": [
              "serviceName",
              "rowOffset",
              "fetchSize",
              "numberOfRows"
            ],
            "type": "object"
          },
          "starfsauglysingar": {
            "items": {
              "properties": {
                "birt": {
                  "description": "Birt á vef, gamalt - ekki notað lengur J/N",
                  "type": "string"
                },
                "fyrirsogn": {
                  "description": "Heiti starfsauglýsingar",
                  "type": "string"
                },
                "haefnikrofur": {
                  "description": "Hæfniskröfur",
                  "type": "string"
                },
                "heimilisfang": {
                  "description": "Heimilisfang deildar/stofnunar",
                  "type": "string"
                },
                "id": { "type": "integer" },
                "inngangur": {
                  "description": "Lýsing - inngangur",
                  "type": "string"
                },
                "language": {
                  "description": "Tungumál auglýsingar",
                  "type": "string"
                },
                "languages": {
                  "description": "Tungumál sem auglýsing hefur verið þýdd á",
                  "type": "string"
                },
                "launaskilmali": {
                  "description": "Launaskilmáli, stéttarfélag",
                  "type": "string"
                },
                "launaskilmaliFull": {
                  "description": "Launaskilmáli, samsettur texti til birtingar.",
                  "type": "string"
                },
                "logoURL": {
                  "description": "Slóð á táknmynd/logo stofnunar",
                  "format": "url",
                  "type": "string"
                },
                "other_languages": {
                  "description": "Önnur tungumál sem auglýsing hefur veruð þýdd á",
                  "type": "string"
                },
                "postfang": {
                  "description": "Póstfang deildar/stofnunar",
                  "type": "string"
                },
                "skipulagseining": {
                  "description": "Skipulagseining innan stofnunar",
                  "type": "string"
                },
                "stadsetningar": {
                  "description": "Staðsetningar starfs, landssvæði eða án staðsetningar",
                  "items": {
                    "description": "Staðsetning",
                    "properties": {
                      "@kodi": {
                        "description": "Kóði staðsetningar",
                        "type": "integer"
                      },
                      "@text": {
                        "description": "Heiti staðsetningar",
                        "type": "string"
                      }
                    },
                    "required": ["@kodi", "@text"],
                    "type": "object"
                  },
                  "type": "array"
                },
                "starfshlutfall": {
                  "description": "Starfshlutfall, til/frá eða föst prósenta",
                  "type": "string"
                },
                "starfssvid": {
                  "description": "Starfssvið, starfaflokkun",
                  "type": "string"
                },
                "starfssvid_code": {
                  "description": "Starfssvið, starfaflokkun - kóði",
                  "type": "integer"
                },
                "stettarfelagHeiti": {
                  "description": "Heiti stéttarfélags",
                  "type": "string"
                },
                "stofnunHeiti": {
                  "description": "Heiti stofnunar",
                  "type": "string"
                },
                "stofnunNr": {
                  "description": "Númer stofnunar, fimm stafa númer með 0 padding. Ath þegar númer er ekki með 0 í fremsta staf þá skilar þjónustan þessu sem number ekki string",
                  "type": "string"
                },
                "tengilidir": {
                  "description": "Tengiliðir, nánari upplýsingar veita",
                  "items": {
                    "description": "Tengiliður",
                    "properties": {
                      "@nr": {
                        "description": "Númer tengiliðs, 1 eða 2, fyrir röðun",
                        "type": "integer"
                      },
                      "nafn": {
                        "description": "Nafn tengiliðs, nánari upplýsingar veitir",
                        "type": "string"
                      },
                      "netfang": {
                        "description": "Netfang tengiliðs",
                        "type": "string"
                      },
                      "simi": {
                        "description": "Sími tengiliðs",
                        "type": "integer"
                      }
                    },
                    "required": ["@nr", "nafn", "netfang"],
                    "type": "object"
                  },
                  "type": "array"
                },
                "umsoknarfrestur_fra": {
                  "description": "umsóknarfrestur frá og með",
                  "format": "dd.mm.yyyy",
                  "type": "string"
                },
                "umsoknarfrestur_til": {
                  "description": "umsóknarfrestur til og með",
                  "type": "string"
                },
                "undirtexti": {
                  "description": "Frekari upplýsingar um starfið",
                  "type": "string"
                },
                "verkefni": {
                  "description": "Helstu verkefni og ábyrgð",
                  "type": "string"
                },
                "vinnutimaskipulag": {
                  "description": "Vinnutímaskipulag",
                  "type": "string"
                },
                "weblink": {
                  "description": "Slóð og texti á vefhlekk til að sækja um starfið",
                  "properties": {
                    "text": {
                      "description": "Texti til að setja á vefhlekk.",
                      "type": "string"
                    },
                    "url": {
                      "description": "Slóð í ráðningarkerfi, smelltu hér til að sækja um",
                      "format": "url",
                      "type": "string"
                    }
                  },
                  "required": ["url", "text"],
                  "type": "object"
                },
                "weblink_extra": {
                  "description": "Aukahlekkur, ekki notað lengur.",
                  "type": "string"
                }
              },
              "required": [
                "id",
                "fyrirsogn",
                "umsoknarfrestur_fra",
                "umsoknarfrestur_til",
                "inngangur",
                "verkefni",
                "haefnikrofur",
                "stofnunHeiti",
                "skipulagseining",
                "heimilisfang",
                "postfang",
                "tengilidir",
                "undirtexti",
                "weblink",
                "weblink_extra",
                "vinnutimaskipulag",
                "starfshlutfall",
                "starfssvid",
                "starfssvid_code",
                "birt",
                "launaskilmali",
                "stettarfelagHeiti",
                "launaskilmaliFull",
                "logoURL",
                "language",
                "languages",
                "other_languages",
                "stadsetningar"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": ["attributes", "starfsauglysingar"],
        "type": "object"
      }
    },
    "securitySchemes": { "basicAuth": { "scheme": "basic", "type": "http" } }
  },
  "info": { "title": "Open Job Positions, vacancies", "version": "2.0.0" },
  "openapi": "3.0.1",
  "paths": {
    "/jobtypes": {
      "get": {
        "description": "Job types",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            },
            "description": "The queried records."
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/locations": {
      "get": {
        "description": "Job locations",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            },
            "description": "The queried records."
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/stofnanir": {
      "get": {
        "description": "Organizations",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/collectionquery" }
              }
            },
            "description": "The queried records."
          },
          "400": { "description": "Bad request." },
          "401": {
            "description": "Authorization information is missing or invalid"
          },
          "5XX": { "description": "Unexpected error" }
        }
      }
    },
    "/vacancies": {
      "get": {
        "description": "Return open vacancies from the icelandic state recruitment system",
        "parameters": [
          {
            "description": "Return vacancies in selected language. Vacancies that have not been translated are returned in icelandic unless ONLYEN is used, then only vacancies that have been translated to english are returned.",
            "in": "query",
            "name": "language",
            "schema": {
              "default": "IS",
              "enum": ["IS", "EN", "ONLYEN", "ONLYIS"],
              "type": "string"
            }
          },
          {
            "description": "Institution abbrevation, fetch only vacancies for that institution",
            "in": "query",
            "name": "stofnun",
            "schema": { "maxLength": 10, "pattern": "\\p{L}", "type": "string" }
          },
          {
            "description": "Query parameter filters by fyrirsogn, inngangur and stofnunHeiti",
            "in": "query",
            "name": "query",
            "schema": { "type": "string" }
          },
          {
            "description": "filter by location (stadsetning), comma delimited id list. Valid ids are found by the /locations endpoint",
            "example": "100,900",
            "in": "query",
            "name": "location",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "description": "filter by jobtype. Comma delimited id list. Valid ids are found by the /jobtypes endpoint",
            "example": "101,102",
            "in": "query",
            "name": "jobtype",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "description": "Fetch offset",
            "example": 0,
            "in": "query",
            "name": "fetch_offset",
            "required": false,
            "schema": { "type": "number" }
          },
          {
            "description": "Fetch size",
            "example": 25,
            "in": "query",
            "name": "fetch_size",
            "required": false,
            "schema": { "type": "number" }
          },
          {
            "in": "header",
            "name": "Accept",
            "schema": {
              "default": "application/xml",
              "enum": ["application/xml", "application/json"],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/openvacaniesv2" }
              },
              "application/xml": { "schema": { "type": "object" } }
            },
            "description": "The queried records."
          },
          "401": { "$ref": "#/components/responses/UnauthorizedError" }
        }
      }
    },
    "/vacancies/{vacancy_id}": {
      "get": {
        "description": "Retrieve a record from /api/umsokn/v1/",
        "parameters": [
          {
            "description": "the vacancy id to retrieve",
            "in": "path",
            "name": "vacancy_id",
            "required": true,
            "schema": { "type": "integer" }
          },
          {
            "description": "Return vacancies in selected language. Vacancies that have not been translated are returned in icelandic unless ONLYEN is used, then only vacancies that have been translated to english are returned.",
            "in": "query",
            "name": "language",
            "schema": {
              "default": "IS",
              "enum": ["IS", "EN", "ONLYEN", "ONLYIS"],
              "type": "string"
            }
          },
          {
            "in": "header",
            "name": "Accept",
            "schema": {
              "default": "application/xml",
              "enum": ["application/xml", "application/json"],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/openvacaniesv2" }
              },
              "application/xml": { "schema": { "type": "object" } }
            },
            "description": "The queried record."
          },
          "401": { "$ref": "#/components/responses/UnauthorizedError" }
        }
      }
    }
  },
  "security": [{ "basicAuth": [] }],
  "servers": [
    {
      "description": "Development server 1",
      "url": "/ords/oebs/api/umsokn/v2"
    },
    {
      "description": "Development server 2",
      "url": "/ords/oebs/api/umsokn/v2"
    },
    { "description": "Test server", "url": "/ords/oebs/api/umsokn/v2" },
    { "description": "Production server", "url": "/ords/oebs/api/umsokn/v2" }
  ]
}
