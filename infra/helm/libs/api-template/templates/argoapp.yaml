{{- if .Values.enabled }}
{{- $fullName := include "api-template.fullname" . -}}
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: {{ include "api-template.fullname" . }}
  {{- if .Values.namespace }}
  namespace: {{ .Values.namespace }}
  {{- end }}
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  destination:
  {{- if .Values.namespace }}
  namespace: {{ .Values.namespace }}
  {{- end }}
  server: some.cluster.name
  project: island.is
{{- end }}
